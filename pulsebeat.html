<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PulseBeat</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      background: linear-gradient(135deg, #1e1e2f, #3a3a5a);
      color: white;
    }

    .container {
      text-align: center;
    }

    /* BPM Display */
    .bpm-display {
      font-size: 48px;
      margin: 20px 0;
    }

    /* Buttons */
    button {
      background: #444;
      border: none;
      color: white;
      padding: 10px 20px;
      margin: 5px;
      font-size: 16px;
      cursor: pointer;
      border-radius: 8px;
      transition: background 0.3s;
    }

    button:hover {
      background: #666;
    }

    /* Langues */
    .language-selector {
      margin-top: 20px;
    }

    /* Animation de l'onde du logo */
    .pulse-wave {
      stroke-dasharray: 120;
      stroke-dashoffset: 0;
      animation: pulseAnim 2s linear infinite;
    }

    @keyframes pulseAnim {
      from { stroke-dashoffset: 120; }
      to   { stroke-dashoffset: 0; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Logo PulseBeat -->
    <div id="appLogo" style="margin-bottom:30px;">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 60" width="200" height="60">
        <style>
          .pulse-text { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            font-size: 28px; 
            font-weight: bold; 
            fill: white;
          }
          .pulse-wave {
            stroke: white;
            stroke-width: 2;
            fill: none;
          }
        </style>
        <text x="10" y="40" class="pulse-text">PulseBeat</text>
        <polyline class="pulse-wave" points="130,30 140,10 150,50 160,20 170,40 180,25 190,35" />
      </svg>
    </div>

    <div class="bpm-display" id="bpmDisplay">120</div>
    <div>
      <button onclick="changeBPM(-5)">-5</button>
      <button onclick="changeBPM(-1)">-1</button>
      <button onclick="changeBPM(1)">+1</button>
      <button onclick="changeBPM(5)">+5</button>
    </div>
    <div style="margin-top:20px;">
      <button onclick="toggleMetronome()" id="toggleBtn">▶️ Démarrer</button>
    </div>
    <div class="language-selector">
      <button onclick="changeLanguage('fr')">FR</button>
      <button onclick="changeLanguage('en')">EN</button>
      <button onclick="changeLanguage('jp')">日本語</button>
    </div>
  </div>

  <script>
    let bpm = 120;
    let intervalId = null;

    const texts = {
      fr: { start: "▶️ Démarrer", stop: "⏹️ Arrêter" },
      en: { start: "▶️ Start", stop: "⏹️ Stop" },
      jp: { start: "▶️ スタート", stop: "⏹️ ストップ" }
    };

    let currentLang = "fr";

    function updateBPM() {
      document.getElementById("bpmDisplay").textContent = bpm;
    }

    function changeBPM(change) {
      bpm = Math.max(20, Math.min(300, bpm + change));
      updateBPM();
      if (intervalId) {
        clearInterval(intervalId);
        startMetronome();
      }
    }

    function startMetronome() {
      const interval = 60000 / bpm;
      intervalId = setInterval(() => {
        if (navigator.vibrate) {
          navigator.vibrate(50);
        }
      }, interval);
    }

    function stopMetronome() {
      clearInterval(intervalId);
      intervalId = null;
    }

    function toggleMetronome() {
      const btn = document.getElementById("toggleBtn");
      if (intervalId) {
        stopMetronome();
        btn.textContent = texts[currentLang].start;
      } else {
        startMetronome();
        btn.textContent = texts[currentLang].stop;
      }
    }

    function changeLanguage(lang) {
      currentLang = lang;
      const btn = document.getElementById("toggleBtn");
      btn.textContent = intervalId ? texts[lang].stop : texts[lang].start;
    }
  </script>
</body>
</html>
